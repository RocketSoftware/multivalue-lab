subroutine X1365(Failure,Msg,Iterations,StartWall,EndWall,StartCpu,EndCpu)

* Copyright IBM, 17076

StartWall = 0; * In case we do not finish
StartCpu = 0;  * In case we do not finish
EndWall = 0;   * In case we do not finish
EndCpu = 0;    * In case we do not finish
equ TEST_ID to 1365

FileNameBase = "File":TEST_ID:"."
equ MAX_FILES to 10
dim Files(MAX_FILES)
for Ndx = 1 to MAX_FILES
	FileName = FileNameBase:Ndx
	call CreateFile(Failure,Msg,"DATA",FileName,"DYNAMIC",1,4,"")
	if Failure # 0 then goto ErrorExit
	call OpenFile(Failure,Msg,fFileName,FileName)
	if Failure # 0 then goto ErrorExit
	Files(Ndx) = fFileName
	Opened = Ndx
next Ndx
Record = spaces(1625)
RecordId = "0"
write Record on fFileName,RecordId on error
	Failure = 1
	Msg = "Cannot WRITE ":FileName:",":RecordId
	goto ErrorExit
end

StartWall = system(12)
StartCpu  = system( 9)
for IterationsNdx = 1 to Iterations
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end
read Record from fFileName,RecordId else
	Failure = 1
	Msg = "Cannot READ ":FileName:",":RecordId
	goto ErrorExit
end

next IterationsNdx
EndCpu  = system( 9)
EndWall = system(12)

close fFileName
for Ndx = 1 to Opened
	close Files(Ndx)
	call DeleteFile(Failure,Msg,"DATA",FileNameBase:Ndx)
next Ndx

return
ErrorExit:
**********
Print Msg
Iterations = 0; * Cause loop control to terminate
return

end
